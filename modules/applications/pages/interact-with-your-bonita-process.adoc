= Interact with your Bonita process
:description: Interact with a Bonita runtime in multiple ways using API requests.

{description}


== Pre-requisites 
* Bonita UI Builder downloaded and launched
* Bonita Studio version 2024.3 or any later version
* A running Bonita project with a defined process diagram, BDM, and contract. Follow the xref:getting-started:getting-started-index.adoc[Getting Started tutorial] if you need any help


== Create a Bonita datasource
From a page in edit mode, click the `Data` icon from the left panel.
Then, you get the list of the provided datasources.

From the `APIs` section, click on the `Bonita API`. By default, it will connect to the Bonita runtime running on the local machine. No need to provide any credential information, since they are already provided at the xref:download-and-launch.adoc[Download and launch] step.

Then, click on the `Save` button to save the datasource.

image::images/interact-with-your-bonita-process/create-datasource.gif[create-datasource]


== Create Bonita API requests
Once the datasource is saved, you can create API requests and interact with the Bonita runtime with the xref:api:rest-api-overview.adoc[REST APIs].
We will describe below how you can for example retrieve a list of Bonita processes, and instantiate one of them.

=== Get a list of processes
To get the list of the processeses deployed on the Bonita runtime (first 10): click the `Editor` icon from the left panel, click the `Queries` tab, then click the `new query / API` button and select the Bonita datasource created previously. 
Enter the following configuration:

* `Name`: getProcess
* `Method`: GET
* `URL`: /bonita/API/bpm/process
* `Params`:
    - `Key`: p
    - `Value`: 0
    - `Key`: c
    - `Value`: 10

Then, click on `Run` to test the API and see the result in the `Response` tab.

image::images/interact-with-your-bonita-process/get-process.gif[get-process]


[NOTE]
====
The authentication to the Bonita runtime is automatically handled by the Bonita datasource.
====


=== Instantiate a process
Now, we will instantiate one of the processes with what the user typed in the form we created xref:create-an-interface.adoc[previously]. 

Click the `Editor` icon from the left panel, click the `Queries` tab, then click the `new query / API` button and select the Bonita datasource created previously. 
Enter the following configuration:

* `Name`: instantiateProcess
* `Method`: POST
* `URL`: API/bpm/process/{{getProcess.data[0].id}}/instantiation
* `Params`:
    - `Key`: p
    - `Value`: 0
    - `Key`: c
    - `Value`: 10
* `Body`: 
[source, JSON]
----
{{
	{
		claimInput: {
			description: Input1.text,
		}
	}
}}
----


This API will instantiate the first process returned by `getProcess` with the `body` 's content. 

[NOTE]
====
In Bonita, you need to refer to your Bonita contract in order to instantiate a process.
Here, we used the Getting Started tutorial as an example: `description` is a mandatory input for the `claimInput` xref:declare-contracts.adoc[contract], and `description` will take as value what is typed in the `Input1` widget of the form.
====

Now, we need to tell the form to execute this API request after clicking the `submit` button.

Go to the `UI` tab and click the form's `submit` button. On the right panel, click the `onclick` label, then select `execute a query` and choose `instantiateProcess`.

image::images/interact-with-your-bonita-process/bind-data.gif[bind-data]


Everything is settled. Now, click the `preview` button on top of the screen and test your form:

image::images/interact-with-your-bonita-process/test-instantiate.gif[test-instantiate]

You now have a working interface that interacts with your Bonita process and data, congratulations!
