= How to manage financial data in your User Interfaces
:page-aliases: ROOT:manage-financial-data.adoc
:description: Learn how to create forms using UI Designer that can read or write financial data over your processes and BDMs.

{description}

NOTE: This tutorial is mostly illustrated using the link:https://github.com/Bonitasoft-Community/expense-report-example[Expense Report community example].

== Define a price amount in your Business Data Model

Add a specific price attribute in the Business Object of your Business Data Model.

image::images/financial-data-tutorial/BDM.png[BDM]

WARNING: Be sure to select DOUBLE type to avoid rounding issues back and forth with the UI elements.

== Read a price amount from the BDM to your UI

1. Use xref:ROOT:data-management.adoc[Data Management] to load your Business Object in your UI page with a simple Drag and Drop. +
In the screenshot illustration, all existing ExpenseReportLine are queried into UI variable expenseReportLines with a find query.

2. Drag and drog a new Currency Input widget from the UI-Designer palette to your page. +
Set the currency widget Read-only property to true.

3. Bind the currency widget Value to your Business Object price attribute. +
In the above example, the widget Value is bound to the price of the first ExpenseReportLine in the list.

image::images/financial-data-tutorial/Display.png[Display]

== Write a price amount from your UI to the BDM

NOTE: In Bonita, writing to a BDM object always goes through a Process.

1. In your process, create a Business or a Process variable that instantiate the Business Object containing the price amount attribute.

2. Use a xref:ROOT:contracts-and-contexts.adoc[Contract] to explicit what data should get out of your UI form to the Business or Process variable. +
Warning: the contract on the price amount might appear as Decimal type.

image::images/financial-data-tutorial/Contract.png[Contract]

3. Create a form with an output that respect the contract - it is strongly advised to use ROOT:contracts-and-contexts.adoc[Forms Generation].

4. In the form, create a Currency Widget. +
And bind it's Value property to your form output.

== Configure your widget

Fine tune your target currency using the Currency Widget properties. +
Widget's min/max properties can be used to limit the user input values. +
All widget properties can be changed dynamically depending on application specific parameters (locale, language, expense limit, ...).

NOTE: negative amounts are supported by the Currency Widget.

== Need price mathematical operations in the UI ?

There is a big chance financial or bugdetary logic to be implemented into applications backend.
However it could be usefull in some cases to provide guidance in the UI as the user complete a form or a page that do require price-based computations. +
Like price totals, quantity multiplications, percentages.

Here is an example of how to sum to inputs prices from scratch in an UI-Designer page: +

1. Drag and drop two Currency Widgets.

2. Create two variables 'var1' and 'var2' and bind them respectively to both widgets Value properties. +
Variable types can be any static type (JSON or String).

3. Create a third variable called 'sum', of type "Javascript expression". +
Set it to:
> return $data.var1 + $data.var2;

4. Create a new Currency Widget. +
Set it to read only. Bind it's Value property to the sum variable.

image::images/financial-data-tutorial/UIComputation.png[UIComputation]

That's it! The thirs widget will contain the addition of values of two others.